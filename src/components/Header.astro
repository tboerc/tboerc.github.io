---
import { i18n } from '@i18n/index'

const { t, r } = i18n(Astro.url)
const currentPathname = new URL(Astro.request.url).pathname

const root = r('/')

const menuItems = [
	{ text: t('menu.home'), pathname: root },
	{ text: t('menu.about'), pathname: r('/about/') },
	{ text: t('menu.contact'), pathname: r('/contact/') },
	{ text: t('menu.blog'), pathname: r('/blog/') }
]

const container = 'container flex border-x border-black p-4 md:p-6 2xl:max-w-screen-xl'

const isRouteActive = (pathname: string, currentPathname: string, root: string) => {
	if (pathname === root) return currentPathname === pathname
	return currentPathname.startsWith(pathname)
}
---

<header class="inline font-display font-semibold">
	<div class="border-b border-black">
		<div class:list={[container, 'flex-col text-5xl uppercase md:text-6xl lg:text-7xl xl:text-8xl']}>
			<span>Tiago Boer Casagrande</span>
			<span class="self-end bg-violet-800 text-right text-white">{t('header.softwareEngineer')}</span>
		</div>
	</div>
	<div class="sticky top-0 border-b border-black bg-white">
		<nav class:list={[container, 'overflow-auto']}>
			<ul class="flex gap-4 md:gap-6">
				{
					menuItems.map(({ text, pathname }) => (
						<li
							class:list={[
								'text-xl uppercase underline md:text-2xl lg:text-3xl',
								{ 'bg-violet-800 text-white no-underline': isRouteActive(pathname, currentPathname, root) }
							]}
						>
							<a href={pathname}>{text}</a>
						</li>
					))
				}
			</ul>
		</nav>
	</div>
</header>
